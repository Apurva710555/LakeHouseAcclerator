<!-- templates/result_po.html -->
<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Result</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


  <link rel="stylesheet" href="/static/css/result.css">
</head>

<body style="font-family:Arial, sans-serif; margin:0">
  <div class="hero">
    <div class="container" style="max-width:1100px; display:flex; align-items:center; gap:16px">
      <img src="{{ url_for('static', filename='img/DEEP_newlogo2.png') }}?v=1" alt="DEEP"
        style="height:56px; width:auto; filter:none">
      <h1 class="h4 m-0">LakeHouse  Exponentia</h1>
    </div>
  </div>
  <div class="container" style="max-width:1000px; padding:24px 12px">
    <h1 class="h4">Submission Acknowledgment</h1>
    <p class="alert alert-success" role="alert" style="max-width:900px">{{ message }}</p>

    <h2>Details</h2>
    <div class="table-responsive">
      <table class="table table-bordered align-middle" style="max-width: 1000px">
        <thead class="table-light">
          <tr>
            <th>Resource_Type</th>
            <th>Resource_Name</th>
            <th>Resource_id_path</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% if result and result.error %}
          <tr>
            <td>Project</td>
            <td>{{ result.application_name or 'unknown_project' }}</td>
            <td>-</td>
            <td>Failed: {{ result.error }}</td>
          </tr>
          {% else %}
          {% if result.folder_path %}
          <tr>
            <td>Project Folder</td>
            <td>{{ result.application_name }}</td>
            <td>{{ result.folder_path }}</td>
            <td>Success</td>
          </tr>
          {% endif %}

          {% if result.cluster_id %}
          <tr>
            <td>All-Purpose Cluster</td>
            <td>{{ result.application_name }}</td>
            <td>{{ result.cluster_id }}</td>
            <td>Success</td>
          </tr>
          {% endif %}

          {% if result.sql_wh_id %}
          <tr>
            <td>SQL Warehouse</td>
            <td>{{ result.application_name }}_reporting_wh</td>
            <td>{{ result.sql_wh_id }}</td>
            <td>Success</td>
          </tr>
          {% endif %}

          {% if result.groups %}
          {% for group_name in result.groups %}
          <tr>
            <td>Group</td>
            <td>{{ group_name }}</td>
            <td>-</td>
            <td>Success</td>
          </tr>
          {% endfor %}
          {% endif %}

          {% endif %}
        </tbody>
      </table>
    </div>

    <div class="d-flex flex-column align-items-center">
      <button id="notify-owner-btn" class="btn btn-primary mt-3" type="button">Notify Owner</button>
      <div id="notify-owner-message" class="mt-2 w-100" style="max-width:500px;"></div>
    </div>
    <p class="mt-3"><a href="/">Back</a></p>
  </div>
  <script id="result-data" type="application/json">{{ result|tojson }}</script>
  <script src="{{ url_for('static', filename='js/result.js') }}" defer></script>
</body>

</html>